<!--components/sql-editor/sql-editor.wxml-->
<view class="sql-editor {{theme}}">
  <!-- å·¥å…·æ  -->
  <view class="toolbar">
    <view class="toolbar-left">
      <text class="toolbar-item" bindtap="formatSQL">
        <text class="icon">âš¡</text>
        æ ¼å¼åŒ–
      </text>
      <text class="toolbar-item" bindtap="clearContent">
        <text class="icon">ğŸ—‘ï¸</text>
        æ¸…ç©º
      </text>
    </view>
    <view class="toolbar-right">
      <text class="cursor-info">
        ç¬¬{{currentLine}}è¡Œï¼Œç¬¬{{currentColumn}}åˆ—
      </text>
    </view>
  </view>

  <!-- ç¼–è¾‘å™¨ä¸»ä½“ -->
  <view class="editor-container" style="height: {{height}};">
    <!-- è¡Œå·åŒºåŸŸ -->
    <view class="line-numbers">
      <text 
        wx:for="{{lineNumbers}}" 
        wx:key="index" 
        class="line-number"
      >
        {{item}}
      </text>
    </view>

    <!-- ä»£ç ç¼–è¾‘åŒºåŸŸ -->
    <view class="code-area">
      <textarea
        class="sql-textarea"
        value="{{sqlText}}"
        placeholder="{{placeholder}}"
        disabled="{{readonly}}"
        bindinput="onInput"
        bindfocus="onFocus"
        bindblur="onBlur"
        auto-height="{{false}}"
        show-confirm-bar="{{false}}"
        cursor-spacing="20"
        maxlength="-1"
      ></textarea>
    </view>
  </view>

  <!-- å¿«æ·æ¨¡æ¿ -->
  <view class="templates" wx:if="{{!readonly}}">
    <view class="template-title">å¿«æ·æ¨¡æ¿ï¼š</view>
    <view class="template-list">
      <text 
        class="template-item" 
        bindtap="insertTemplate" 
        data-template="SELECT * FROM users;"
      >
        SELECT
      </text>
      <text 
        class="template-item" 
        bindtap="insertTemplate" 
        data-template="INSERT INTO users (name, email) VALUES ('å¼ ä¸‰', 'zhangsan@example.com');"
      >
        INSERT
      </text>
      <text 
        class="template-item" 
        bindtap="insertTemplate" 
        data-template="UPDATE users SET name = 'æå››' WHERE id = 1;"
      >
        UPDATE
      </text>
      <text 
        class="template-item" 
        bindtap="insertTemplate" 
        data-template="DELETE FROM users WHERE id = 1;"
      >
        DELETE
      </text>
    </view>
  </view>

  <!-- æ‰§è¡ŒæŒ‰é’® -->
  <view class="execute-bar" wx:if="{{!readonly}}">
    <button 
      class="btn btn-primary execute-btn" 
      bindtap="executeSQL"
      disabled="{{!sqlText.trim()}}"
    >
      <text class="icon">â–¶ï¸</text>
      æ‰§è¡ŒSQL
    </button>
  </view>
</view> 